document.addEventListener("DOMContentLoaded",function(){const h=document.querySelector("#sidebar"),a=document.querySelector("#sidebar > button"),d=document.querySelector("#sidebar > aside"),S=document.querySelector("#content"),l=document.querySelector("#sidebar input"),v=document.querySelectorAll("#sidebar table");function r(){const e=localStorage.getItem("contrib_sidebar_visible")==="false";d.style.display=e?"none":"block",a.innerHTML=e?"&raquo;":"&laquo;",S.style.marginLeft=h.offsetWidth+"px"}function L(){const e=d.style.display==="block";localStorage.setItem("contrib_sidebar_visible",!e),r()}function g(){const e=window.scrollY,n=document.querySelector("header"),t=document.querySelector("nav"),o=n.offsetHeight,c=t?t.offsetHeight:0,s=o+c;e>s?(a.style.paddingTop="0px",d.style.paddingTop="0px"):(a.style.paddingTop=`${s-e}px`,d.style.paddingTop=`${s-e}px`)}function y(){const e=l.value.toLowerCase();let n=!1;v.forEach(function(t){const o=t.querySelectorAll("tbody tr");let c=!1;o.forEach(function(s){s.innerText.toLowerCase().includes(e)?(s.classList.remove("hidden"),c=!0):s.classList.add("hidden")}),c?(t.classList.remove("hidden"),n=!0):t.classList.add("hidden")}),n?l.classList.remove("error"):l.classList.add("error"),localStorage.setItem("contrib_sidebar_filter_text",e)}if(h){a.addEventListener("click",L),window.addEventListener("scroll",g),window.addEventListener("resize",r),l.addEventListener("input",y);const e=localStorage.getItem("contrib_sidebar_filter_text");e&&(l.value=e,y()),r(),g()}document.querySelectorAll("div[toggle]").forEach(function(e){const n=e.querySelector("button"),t=e.querySelector("ul"),o=n.querySelector("button > span"),c="toggle_"+e.getAttribute("toggle");localStorage.getItem(c)==="hidden"&&(t.classList.add("hidden"),o.innerHTML="&rarr;"),n.addEventListener("click",function(){t.classList.toggle("hidden"),t.classList.contains("hidden")?(o.innerHTML="&rarr;",localStorage.setItem(c,"hidden")):(o.innerHTML="&darr;",localStorage.setItem(c,"visible"))})});const i=document.getElementById("bulkActionForm"),u=document.getElementById("bulkAction"),f=document.querySelectorAll('#dataTable tbody input[type="checkbox"]'),m=document.querySelector('#dataTable thead input[type="checkbox"]'),k=document.getElementById("totalSelected");function b(){const e=document.querySelectorAll('#dataTable tbody input[type="checkbox"]:checked');k.textContent=e.length,f.forEach(n=>{const t=n.closest("tr");n.checked?t.classList.add("row-selected"):t.classList.remove("row-selected")})}function p(){const e=u.value;e&&(i.action=e)}i&&(m.addEventListener("change",function(){f.forEach(e=>{e.checked=m.checked}),b()}),f.forEach(e=>{e.addEventListener("change",b)}),u.addEventListener("change",p),i.addEventListener("submit",function(e){p();const n=document.querySelectorAll('#dataTable tbody input[type="checkbox"]:checked');if(n.length===0){e.preventDefault(),alert("Please select at least one row.");return}(!i.action||u.value.length==0)&&(e.preventDefault(),alert("Please select a bulk action."));const t=Array.from(n).map(c=>c.value),o=document.createElement("input");o.type="hidden",o.name="ids",o.value=t.join(","),i.appendChild(o)}),b())});
